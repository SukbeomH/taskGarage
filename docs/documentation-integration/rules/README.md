# 📋 문서 동기화 규칙

## 🎯 개요

이 섹션은 Taskmaster 문서 동기화 통합 기능의 규칙과 가이드라인을 다룹니다.

## 📁 관련 파일들

### 핵심 규칙 파일
- [`.cursor/rules/taskmaster/documentation_integration.mdc`](../../../.cursor/rules/taskmaster/documentation_integration.mdc) - 문서 동기화 통합 규칙
- [`.cursor/rules/dev_workflow.mdc`](../../../.cursor/rules/dev_workflow.mdc) - 개발 워크플로우 규칙

## 📖 규칙 상세 내용

### 1. 문서 동기화 통합 규칙

#### 📝 문서 업데이트 트리거 감지
- **구조체 필드 변경**: 새로운 필드, 태그 변경, 타입 변경
- **함수 시그니처 변경**: 매개변수 추가/제거, 반환 타입 변경
- **에러 코드/메시지 변경**: 새로운 에러 코드, 메시지 수정
- **설정 변경**: 환경 변수, 설정 파일, 구성 옵션 변경
- **API 엔드포인트 변경**: 새로운 엔드포인트, 기존 엔드포인트 수정

#### 🔄 워크플로우 통합
- **기존 8단계 → 새로운 9단계 확장**
- **7단계: Update Documentation** (새로 추가)
  - 문서 업데이트 필요성 평가
  - 자동화된 문서 생성
  - 문서 동기화 상태 검증
  - 문서 업데이트 실패 시 task 상태를 'review'로 변경
  - 문서 업데이트 상태를 subtask에 기록

#### 🛠️ 자동화 스크립트 통합
- **기존 패턴 준수**: `executeTaskMasterCommand` 패턴 사용
- **MCP 통합 패턴**: 외부 스크립트 대신 내장 로직 사용
- **에러 처리**: 문서 동기화 실패 시 적절한 에러 처리

### 2. 개발 워크플로우 규칙

#### 📝 문서 업데이트 필요성 평가
코드 변경 사항에 따른 문서 업데이트 필요성 판단

#### 🤖 자동화된 문서 생성
내장 로직을 통한 문서 동기화 실행

#### ✅ 문서 동기화 상태 검증
생성된 문서의 정확성 및 완성성 검증

#### 🔄 문서 업데이트 실패 시 task 상태를 'review'로 변경
문서 동기화가 실패한 경우 task 완료 차단

#### 📝 문서 업데이트 상태를 subtask에 기록
`update_subtask`를 통해 문서 동기화 진행 상황 로깅

## 🔗 관련 문서

### 구현 관련
- [구현 문서](../implementation/README.md) - 규칙이 적용된 구현 상세
- [테스트 문서](../testing/README.md) - 규칙 준수 여부 테스트

### 사용 가이드
- [예제 문서](../examples/README.md) - 규칙 적용 예제
- [메인 문서](../README.md) - 전체 개요

## 🚀 규칙 적용 방법

### 1. 코드 변경 시 규칙 준수
```javascript
// ✅ DO: update_subtask 사용 시 코드 변경 감지
await update_subtask({
  id: '1.2',
  prompt: '새로운 API 엔드포인트 /api/users 추가'
});

// 시스템이 자동으로 API 변경을 감지하고 문서 동기화 실행
```

### 2. 문서 동기화 상태 확인
```javascript
// ✅ DO: 문서 동기화 완료 확인
const task = await get_task('1.2');
if (task.details.includes('📝 문서 업데이트 상태: 완료')) {
  // 문서 동기화 성공
} else {
  // 문서 동기화 실패 또는 진행 중
}
```

### 3. 상태 관리 규칙
```javascript
// ✅ DO: 문서 동기화 실패 시 상태 변경
if (documentationSyncFailed) {
  await set_task_status({
    id: '1.2',
    status: 'review'
  });
}
```

## ⚠️ 주의사항

### 규칙 위반 시나리오
- **외부 스크립트 직접 호출**: `execSync` 사용 금지
- **수동 문서 업데이트**: 자동화된 시스템 우회 금지
- **문서 동기화 무시**: 코드 변경 시 문서 업데이트 생략 금지

### 규칙 준수 확인
- 모든 코드 변경은 `update_subtask`를 통해 기록
- 문서 동기화 상태를 정기적으로 확인
- 문서 동기화 실패 시 즉시 'review' 상태로 변경

## 📊 규칙 준수 지표

### 성공 지표
- **문서 동기화 성공률**: 95% 이상
- **코드-문서 동기화율**: 100%
- **자동화 실행률**: 100%

### 모니터링 항목
- 문서 동기화 실패 횟수
- 수동 문서 업데이트 횟수
- 규칙 위반 발생 횟수

## 🔄 규칙 업데이트

### 규칙 변경 절차
1. 규칙 변경 제안
2. 팀 리뷰 및 승인
3. 규칙 파일 업데이트
4. 구현 코드 수정
5. 테스트 실행 및 검증
6. 문서 업데이트

### 버전 관리
- 규칙 버전: 1.0.0
- 마지막 업데이트: 2024년 12월
- 다음 검토 예정: 2025년 3월

---

**📝 마지막 업데이트**: 2024년 12월  
**🔄 버전**: 1.0.0  
**👥 기여자**: Taskmaster 개발팀
